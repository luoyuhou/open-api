generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model user {
  id          Int       @id @default(autoincrement()) @db.UnsignedInt
  user_id     String    @unique(map: "user_id") @db.VarChar(64)
  status      Int       @db.TinyInt
  first_name  String    @db.VarChar(32)
  last_name   String    @db.VarChar(32)
  email       String?   @db.VarChar(64)
  phone       String    @unique(map: "phone") @db.VarChar(11)
  avatar      String?   @db.VarChar(256)
  create_date DateTime? @default(now()) @db.DateTime(0)
  update_date DateTime? @default(now()) @db.DateTime(0)
}

model user_signin_history {
  id          Int       @id @default(autoincrement()) @db.UnsignedInt
  user_id     String    @db.VarChar(64)
  ip          String?   @db.VarChar(64)
  useragent   String?   @db.VarChar(256)
  source      Int       @db.TinyInt
  create_date DateTime? @default(now()) @db.DateTime(0)
  update_date DateTime? @default(now()) @db.DateTime(0)

  @@index([create_date], map: "user_signIn_history_createDate_idx")
  @@index([user_id], map: "user_signIn_history_userId_idx")
}

model user_signin_password {
  id                 Int       @id @default(autoincrement()) @db.UnsignedInt
  user_id            String    @unique(map: "user_id") @db.VarChar(64)
  salt               String    @db.VarChar(16)
  password           String    @db.VarChar(64)
  failed_login_times Int       @default(0) @db.UnsignedTinyInt
  locked_date        DateTime? @db.DateTime(0)
  create_date        DateTime? @default(now()) @db.DateTime(0)
  update_date        DateTime? @default(now()) @db.DateTime(0)
}

model store {
  id          Int       @id @default(autoincrement()) @db.UnsignedInt
  store_id    String    @unique(map: "store_id") @db.VarChar(64)
  id_code     String    @db.VarChar(32)
  id_name     String    @db.VarChar(32)
  user_id     String    @db.VarChar(64)
  store_name  String    @db.VarChar(64)
  phone       String    @db.VarChar(11)
  province    String    @db.VarChar(8)
  city        String    @db.VarChar(8)
  district    String    @db.VarChar(16)
  address     String    @db.VarChar(128)
  status      Int       @default(0) @db.TinyInt
  create_date DateTime? @default(now()) @db.DateTime(0)
  update_date DateTime? @default(now()) @db.DateTime(0)

  @@index([store_name], map: "store_name_idx")
  @@index([user_id], map: "store_user_idx")
}

model store_history {
  id                Int       @id @default(autoincrement()) @db.UnsignedInt
  store_id          String    @db.VarChar(64)
  action_type       Int       @db.UnsignedTinyInt
  action_content    String    @db.VarChar(256)
  applicant_user_id String    @db.VarChar(64)
  applicant_date    DateTime  @db.Date
  replient_user_id  String?   @db.VarChar(64)
  replient_date     DateTime? @db.DateTime(0)
  replient_content  String?   @db.VarChar(256)
  create_date       DateTime? @default(now()) @db.DateTime(0)
  update_date       DateTime? @default(now()) @db.DateTime(0)

  @@index([action_type], map: "store_action_type_idx")
  @@index([store_id], map: "store_history_idx")
}

model user_address {
  id              Int       @id @default(autoincrement()) @db.UnsignedInt
  user_address_id String    @unique(map: "user_address_id") @db.VarChar(64)
  user_id         String    @db.VarChar(64)
  recipient       String    @db.VarChar(64)
  phone           String    @db.VarChar(16)
  province        String    @db.VarChar(8)
  city            String    @db.VarChar(8)
  district        String    @db.VarChar(16)
  address         String    @db.VarChar(128)
  is_default      Boolean   @default(false)
  tag             String?   @db.VarChar(8)
  create_date     DateTime? @default(now()) @db.DateTime(0)
  update_date     DateTime? @default(now()) @db.DateTime(0)

  @@index([user_id], map: "user_address_user_idx")
}
